"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _indicator = _interopRequireDefault(require("../indicators/indicator"));

var _indicatorButton = _interopRequireDefault(require("../styled/indicatorButton"));

describe('<Indicator />', function () {
  it('should set the right props if the indicator is selected', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_indicator["default"], {
      selectedItem: "indicator-1",
      indicatorID: "indicator-1",
      containerID: "container-1",
      header: "Header"
    }));
    var buttonComponent = component.find(_indicatorButton["default"]);
    expect(buttonComponent.exists()).toBe(true);
    expect(buttonComponent.prop('aria-selected')).toBe(true);
    expect(buttonComponent.prop('tabIndex')).toBe(0);
    expect(buttonComponent.prop('isSelected')).toBe(true);
  });
  it('should set the right props if the indicator is not selected', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_indicator["default"], {
      selectedItem: "indicator-2",
      indicatorID: "indicator-1",
      containerID: "container-1",
      header: "Header"
    }));
    var buttonComponent = component.find(_indicatorButton["default"]);
    expect(buttonComponent.prop('aria-selected')).toBe(false);
    expect(buttonComponent.prop('tabIndex')).toBe(-1);
  });
  it('should set the assistive text as title to the button element', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_indicator["default"], {
      selectedItem: "indicator-1",
      indicatorID: "indicator-1",
      containerID: "container-1",
      header: "Header"
    }));
    var buttonComponent = component.find(_indicatorButton["default"]);
    expect(buttonComponent.text()).toBe('Header Tab');
    expect(buttonComponent.prop('title')).toBe('Header Tab');
  });
  it('should set title and text in AssistiveText to undefined when header is not a string', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_indicator["default"], {
      selectedItem: "indicator-1",
      indicatorID: "indicator-1",
      containerID: "container-1",
      header: _react["default"].createElement("span", null, "Header")
    }));
    var buttonComponent = component.find(_indicatorButton["default"]);
    expect(buttonComponent.text()).toBe('');
    expect(buttonComponent.prop('title')).toBe(undefined);
  });
  it('should set the role as tab in button element', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_indicator["default"], {
      selectedItem: "indicator-1",
      indicatorID: "indicator-1",
      containerID: "container-1",
      header: _react["default"].createElement("span", null, "Header")
    }));
    var buttonComponent = component.find(_indicatorButton["default"]);
    expect(buttonComponent.prop('role')).toBe('tab');
  });
  it('should set the right accesivillity props', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_indicator["default"], {
      selectedItem: "indicator-1",
      indicatorID: "indicator-1",
      containerID: "container-1",
      header: "Header"
    }));
    var buttonComponent = component.find(_indicatorButton["default"]);
    expect(buttonComponent.prop('id')).toBe('indicator-1');
    expect(buttonComponent.prop('aria-controls')).toBe('container-1');
  });
  it('should call the function passed in onSelect prop', function () {
    var onSelectMockFn = jest.fn();
    var component = (0, _enzyme.mount)(_react["default"].createElement(_indicator["default"], {
      selectedItem: "indicator-1",
      indicatorID: "indicator-1",
      containerID: "container-1",
      header: "Header",
      onSelect: onSelectMockFn
    }));
    var buttonComponent = component.find(_indicatorButton["default"]);
    buttonComponent.simulate('click');
    expect(onSelectMockFn).toHaveBeenCalledWith('indicator-1');
  });
});